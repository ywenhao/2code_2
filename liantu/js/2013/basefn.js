function generate(){this.error=[],this.string="",this._isMail=function(t){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)},this._isTeleNum=function(t){return/^(13[0-9]{9})|(15[89][0-9]{8})$/.test(t)},this._isUrl=function(t){return new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$").test(t)},this.getString=function(){return this.string},this.getError=function(){return this.error}}function Mode_text(){generate.apply(this);var t=$.trim($("#text_text").val());t||this.error.push("文本不能为空!"),this.string=t}function Mode_url(){generate.apply(this);var t=$.trim($("#url_url").val());t&&"http://"!=t||this.error.push("网址不能为空!"),this.string=t}function Mode_weixin(){generate.apply(this);var t=$.trim($("#url_url").val());t&&(this.string="weixin://profile/"+t)}function Mode_telephone(){generate.apply(this);var t=$.trim($("#telephone_tel").val());t||this.error.push("电话号码不能为空!"),t&&(this.string="tel:"+t)}function Mode_sms(){generate.apply(this);var t=$.trim($("#sms_tel").val());t||this.error.push("电话号码不能为空!");var r=$.trim($("#sms_sms").val());r||this.error.push("短信不能为空!"),t&&(this.string+="smsto:"+t+":"),r&&(this.string+=r)}function Mode_card(){generate.apply(this);var t=$.trim($("#card_n").val()),r=$.trim($("#card_org").val()),i=$.trim($("#card_til").val()),s=$.trim($("#card_tel").val()),e=$.trim($("#card_phone").val()),a=$.trim($("#card_url").val()),n=$.trim($("#card_mail").val()),h=$.trim($("#card_adr").val()),l=$.trim($("#car_note").val());t||this.error.push("姓名不能为空!"),s||this.error.push("电话号码不能为空!"),this._isTeleNum(s)||this.error.push("无效的电话号码！"),r||this.error.push("单位不能为空!"),i||this.error.push("职位不能为空!"),a||this.error.push("网址不能为空!"),this._isUrl(a)||this.error.push("无效的网址"),n||this.error.push("邮箱不能为空!"),this._isMail(n)||this.error.push("无效的邮箱!"),h||this.error.push("地址不能为空!"),"http://"==a&&(a=""),(t||s||e||r||i||a||n||h||l)&&(this.string="MECARD:",s&&(this.string+="TEL:"+s+";"),e&&(this.string+="TEL:"+e+";"),a&&(this.string+="URL:"+a+";"),n&&(this.string+="EMAIL:"+n+";"),l&&(this.string+="NOTE:"+l+";"),t&&(this.string+="N:"+t+";"),r&&(this.string+="ORG:"+r+";"),i&&(this.string+="TIL:"+i+";",this.string+="TITLE:"+i+";"),h&&(this.string+="ADR:"+h+";"))}function Mode_mail(){generate.apply(this);var t=$.trim($("#mail_mail").val());t||this.error.push("邮箱不能为空!"),this._isMail(t)||this.error.push("无效邮箱!"),this.string=t}function Mode_wifi(){generate.apply(this);var t=$.trim($("#wifi_ssid").val()),r=$.trim($("#wifi_p").val()),i=$.trim($("#wifi_t").val());t||this.error.push("ssid账号不能为空!"),(t||r)&&(this.string="WIFI:",t&&(this.string+="S:"+t+";"),i&&(this.string+="T:"+i+";"),r&&(this.string+="P:"+r+";"))}function Mode_map(){generate.apply(this),this.string=$.trim($("#map_map").val())}function countSize(t,r){var i=t.val().length;t.next().children("span").text(i)}function defalutText(t,r){t.val()==r&&t.addClass("default"),t.focus(function(){t.val()==r&&t.val("").removeClass("default")}),t.blur(function(){""==t.val()&&t.val(r).addClass("default")})}